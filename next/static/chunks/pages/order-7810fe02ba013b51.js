(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{6054:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order",function(){return n(7902)}])},9556:function(t,e,n){"use strict";n.d(e,{m:function(){return c}});var r=n(4529),i=n(2912),o=n(8016),s=n(9117);function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){u(t,e,n[e])}))}return t}var c=(0,r.Ue)((function(t,e){return{stores:[],edit:!1,add:!1,loading:!1,storeId:null,setStore:function(e){t((function(t){return a({},t,{loading:!0})})),(0,i.r8)(e).then((function(e){console.log(e),"success"==e.data.status&&(t((function(t){return a({},t,{stores:e.data.data})})),t((function(t){return a({},t,{loading:!1})})))}))},setStoreId:function(e){t((function(t){return a({},t,{storeId:e})}))},setEdit:function(e){t((function(t){return a({},t,{edit:e})}))},setAdd:function(e){t((function(t){return a({},t,{add:e})}))},addStore:function(n){t((function(t){return a({},t,{loading:!0})})),(0,i.MT)(n).then((function(n){console.log(n),"success"==n.data.status?(t((function(t){return a({},t,{loading:!1})})),t((function(t){return a({},t,{add:!1})})),o.q.getState().setMessage(n.data.message),o.q.getState().setStatus(!0),o.q.getState().setType("success"),e().refecthStore()):(t((function(t){return a({},t,{loading:!1})})),t((function(t){return a({},t,{add:!1})})),o.q.getState().setMessage(n.data.message),o.q.getState().setStatus(!0),o.q.getState().setType("error"))}))},editStore:function(n){t((function(t){return a({},t,{loading:!0})})),(0,i.xW)(n).then((function(n){console.log(n),"success"==n.data.status?(t((function(t){return a({},t,{edit:!1})})),t((function(t){return a({},t,{loading:!1})})),o.q.getState().setMessage(n.data.message),o.q.getState().setStatus(!0),o.q.getState().setType("success"),e().refecthStore()):(t((function(t){return a({},t,{loading:!1})})),o.q.getState().setMessage(n.data.message),o.q.getState().setStatus(!0),o.q.getState().setType("error"))}))},refecthStore:function(){var t={token:s.L.getState().user};e().setStore(t)}}}))},5538:function(t,e,n){"use strict";n.d(e,{S:function(){return u}});var r=n(4529),i=n(2912);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){o(t,e,n[e])}))}return t}var u=(0,r.Ue)((function(t,e){return{teams:[],edit:!1,add:!1,loading:!1,setTeams:function(e){t((function(t){return s({},t,{loading:!0})})),(0,i.LK)(e).then((function(e){console.log(e),"success"==e.data.status&&(t((function(t){return s({},t,{teams:e.data.data})})),t((function(t){return s({},t,{loading:!1})})))}))},setEdit:function(e){t((function(t){return s({},t,{edit:e})}))},setAdd:function(e){t((function(t){return s({},t,{add:e})}))},addTeam:function(e){t((function(t){return s({},t,{loading:!0})})),(0,i.Cm)(e).then((function(t){console.log(t)}))}}}))},7902:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return N}});var r,i=n(5893),o=n(6886),s=n(5861),u=n(6242),a=n(8445),c=n(3835),l=n(7357),d=n(7294),f=n(4529),g=n(2912),h=(n(8016),n(9117));function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){m(t,e,n[e])}))}return t}var j=(0,f.Ue)((function(t,e){return m(r={orders:[],loading:!1,edit:!1,add:!1},"loading",!1),m(r,"storeRef",null),m(r,"setOrderRef",(function(e){t((function(t){return x({},t,{storeRef:e})}))})),m(r,"setEdit",(function(e){t((function(t){return x({},t,{edit:e})}))})),m(r,"setAdd",(function(e){t((function(t){return x({},t,{add:e})}))})),m(r,"setOrder",(function(e){t((function(t){return x({},t,{loading:!0})})),(0,g.AU)(e).then((function(e){console.log(e),"success"==e.data.status&&(t((function(t){return x({},t,{orders:e.data.data})})),t((function(t){return x({},t,{loading:!1})})))}))})),m(r,"assignRider",(function(e){t((function(t){return x({},t,{loading:!0})})),(0,g.f0)(e).then((function(e){console.log(e),"success"==e.data.status&&t((function(t){return x({},t,{loading:!1})}))}))})),m(r,"refecthStore",(function(){var t={token:h.L.getState().user};e().setStore(t)})),r})),p=n(4054),b=n(7312),S=n(315),Z=n(2224),y=n(3321),v=n(2175),O=n(9556),_=n(5538),P=function(){var t=(0,h.L)((function(t){return t.user})),e=(0,O.m)((function(t){return t.stores})),n=(0,O.m)((function(t){return t.setStore})),r=(0,_.S)((function(t){return t.setTeams})),u=(0,_.S)((function(t){return t.teams})),a=j((function(t){return t.storeRef})),c=j((function(t){return t.assignRider}));(0,d.useEffect)((function(){r({token:t,email:"",role:"rider"})}),[t,r]),(0,d.useEffect)((function(){n({token:t,store_id:"",location:"",store:"",page:"",limit:""})}),[t,n]);return(0,i.jsx)(v.J9,{initialValues:{email:"",store_id:"",reference_code:""},enableReinitialize:!0,onSubmit:function(e){var n={token:t,email:e.email,store_id:e.store_id,reference_code:[a]};c(n)},children:function(t){var n=t.values,r=t.handleSubmit,a=t.handleChange;return(0,i.jsx)("form",{onSubmit:r,children:(0,i.jsxs)(o.ZP,{container:!0,spacing:7,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:12,children:(0,i.jsx)(s.Z,{variant:"h5",sx:{marginBottom:2},children:"Add New Store"})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:12,children:(0,i.jsxs)(p.Z,{fullWidth:!0,children:[(0,i.jsx)(b.Z,{children:"Rider"}),(0,i.jsx)(S.Z,{label:"Email",name:"email",value:n.email,onChange:a,children:null===u||void 0===u?void 0:u.map((function(t){return(0,i.jsx)(Z.Z,{value:t.email,children:t.email},t.email)}))})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,sm:12,children:(0,i.jsxs)(p.Z,{fullWidth:!0,children:[(0,i.jsx)(b.Z,{children:"Store"}),(0,i.jsx)(S.Z,{label:"Store",name:"store_id",value:n.store_id,onChange:a,children:null===e||void 0===e?void 0:e.map((function(t){return(0,i.jsx)(Z.Z,{value:t.store_id,children:t.name},t.store_id)}))})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(y.Z,{variant:"contained",type:"submit",sx:{float:"right"},children:"Assign Rider"})})]})})}})},w=n(5113),E=n(7906),k=n(3816),T=n(3184),q=n(295),C=n(3252),R=n(2882),A=(n(5294),n(3946),n(6160),function(){var t=j((function(t){return t.setEdit})),e=j((function(t){return t.edit})),n=j((function(t){return t.setOrderRef})),r=j((function(t){return t.orders})),o=(0,d.useState)(null),u=o[0],a=(o[1],Boolean(u),r.map((function(t){return function(t,e,n,r,i,o){return{status:t,time:e,amount:n,pstatus:r,ptime:i,ref:o}}(t.order_status,t.order_timestamp,t.amount.total,t.payment_status,t.payment_timestamp,t.reference_code)})));console.log("rows",a);var c=function(r){console.log(r),t(!e),n(r)};return(0,i.jsx)(R.Z,{component:w.Z,children:(0,i.jsxs)(E.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,i.jsx)(T.Z,{children:(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(C.Z,{children:"Order Status"}),(0,i.jsx)(C.Z,{align:"right",children:"Time"}),(0,i.jsx)(C.Z,{align:"right",children:"Amount"}),(0,i.jsx)(C.Z,{align:"right",children:"Payment Status"}),(0,i.jsx)(C.Z,{align:"right",children:"Payment Time"}),(0,i.jsx)(C.Z,{align:"right",children:"reference"}),(0,i.jsx)(C.Z,{align:"right",children:"Action"})]})}),(0,i.jsx)(q.Z,{children:a.map((function(t){return(0,i.jsxs)(k.Z,{sx:{"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,i.jsx)(C.Z,{component:"th",scope:"row",children:t.status}),(0,i.jsx)(C.Z,{align:"right",children:t.time}),(0,i.jsx)(C.Z,{align:"right",children:t.amount}),(0,i.jsx)(C.Z,{align:"right",children:t.pstatus}),(0,i.jsx)(C.Z,{align:"right",children:t.ptime}),(0,i.jsx)(C.Z,{align:"right",children:t.ref}),(0,i.jsx)(C.Z,{align:"right",children:(0,i.jsx)(y.Z,{variant:"outlined",size:"small",onClick:function(){return c(t.ref)},children:(0,i.jsx)(s.Z,{variant:"caption",sx:{fontSize:"10px"},children:"Assign Rider"})})})]},t.ref)}))})]})})}),N=function(){var t=j((function(t){return t.setOrder})),e=j((function(t){return t.edit})),n=j((function(t){return t.setEdit})),r=(0,h.L)((function(t){return t.user})),f=(0,h.L)((function(t){return t.details})).role,g=(0,d.useState)(""),m=g[0],x=g[1];(0,d.useEffect)((function(){t({token:r,reference_code:"",account:m,from:"",to:"",payment_status:"",order_status:""})}),[r,t,m]),(0,d.useEffect)((function(){console.log(f),"Yes"===f.superAdmin?x("panel"):x("store")}),[f]);return(0,i.jsxs)(o.ZP,{container:!0,spacing:6,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between"},children:(0,i.jsx)(s.Z,{variant:"h5",children:"Customer Orders"})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(a.Z,{title:"Orders Table",titleTypographyProps:{variant:"h6"}}),(0,i.jsx)(A,{}),(0,i.jsx)(c.Z,{className:"",open:e,onClose:function(){e&&n(!e)},children:(0,i.jsx)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",width:600,minHeight:100,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#fff",borderRadius:"10px",paddingBlock:20,paddingInline:20},children:(0,i.jsx)(P,{})})})]})})]})}}},function(t){t.O(0,[657,78,175,774,888,179],(function(){return e=6054,t(t.s=e);var e}));var e=t.O();_N_E=e}]);